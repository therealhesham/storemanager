<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بيان حركة مخازن</title>
</head>
<body>
   
    <html lang="en" >
<head>
    <!-- <meta charset="UTF-8"> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>اضافة بيان</title>
    <link rel="stylesheet" href="./css/style.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
   
</script>
<script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
</head>
<body>
  
    <%- include('./partials/header'); -%>
    
    <br><br><br>

    

<form action="/storeitems" method="post" id="post">
   

    <label for="">نوع العملية &nbsp </label> 
   
    <select name="transaction" id="transaction" >
        <option value="وارد">وارد</option>
        <option value="منصرف">منصرف</option>
        <option value="خصم على المقاول">خصم على المقاول</option>
        <option value="تحويلات">تحويلات</option>
        <option value="تشغيل">تشغيل</option>
      </select><br>
      
      <%- include('./partials/chooseitem'); -%>
   

<br>
<label for="">الى &nbsp </label> 
<select name="to" id="selectstore">
    
</select>

<br>
<label for="" id="contractorr"></label> 
<select name="contractor" id="contractor">


    
    
</select>



<br>


        
        <label for="">الفئة</label>
        <select name="type" id="" >
<option value="عدد">عدد</option>
<option value="م/ط">م/ط</option>
<option value="م3">م3</option>
<option value="م2">م2</option>
<option value="طن">طن</option>
        </select><br>
        <label for="">الكمية</label>
      <input type="text" name="quantity">
        <br>  
        <label for="">مكان التعتيق</label>
        <input type="text" name="location">
        <br>
<label for="">المهام</label> <input type="text" name="tasks" id="" placeholder="المهام"><br>
<label for="">التفاصيل</label> <input type="text" name="details" id="" placeholder="التفاصيل"><br>

<input class="btn btn-primary" type="submit" value="اضافة للمخزن" id="submit"> <button class="btn btn-danger" > <a style="text-decoration: none;color: bisque;" href="/refunditems">مرتجع</a></button>

</form>
<p style="margin-left:130px;color:green;">تم اضافة بيان بنجاح لحركة مخازن </p>
<style>


label{
width: 130px;


}
#submit{
margin-left: 60px;

}
form{
margin-left: 90px;

}
</style>
<Script>
    
// document.getElementById("post").addEventListener("click", function(event){
//   event.preventDefault()
// });


/**
Select options object for state and city select elements and relationship
*/
const selectOptions = [
    {
        name: "مخازن",
        cities: [
        "",
        "بني مزار الرئيسي",
            "مخزن دمشير",
            "مخزن سلاقوس",
            "مخزن طوخ الخيل",
            "مخزن ابشاق",
            
            
    "مخزن كوم محرص",
            "مخزن ريحانه",
  
            "مخزن بني خالد",
            "مخزن شلقام",
            "مخزن جبل الطير",
            "مخزن ابوان",
            "مخزن دمشاو",
            "مخزن بني سعيد",
            "ابوجرج",
            "بردنوها",
            "ابوان",
            "دمشير",
            "سلاقوس",
            "شلقام",
            "نزلة جلف",
            "السعدية",
            "بني سعيد",
            'طوخ الخيل',
            "دمشاو"

        ],
    },
    {
        name: "مقاول",
        cities: [
            "عمر حامد",
            "حنا فرج",
            "احمد سليمان",
            "مخيمر",
            "سامح ابوالدهب",
            "ذكريا",
            "علاء محمود",
            "اسلام ضمراني",
            "عبدالعال راضي",
            "رامي ثابت",
            "بكر عبدالراضي",
            "عبدالوهاب احمد",
            "عبدالرحمن محمود",
            "احمد ناجي",
            "عبدالرحمن محمود",
            "شعبان الازهري",
            "محمود صلاح",
            "محمد عبدالظاهر",
            "بيشوي نعيم"

        ],
    },
];


/**
Create an option element
@param {string} value - Option value
@return {Element} - option element
*/
function createOption(value) {
    const opt = document.createElement('option');
    const textNode = document.createTextNode(value);
    opt.appendChild(textNode);
    opt.value = value;
    return opt;
}

/**
Create options with Select
@param {string} selectId - parent of options
@param {array} options - arrays of options
*/
function createOptionsSelect(selectId, options) {
    const select = document.getElementById(selectId);

    // clear all previous options 
    select.innerHTML = '';
    
    for(let i=0;i<options.length;i++) {
        select.appendChild(options[i]);
    }    
}

/**
 * Retrieve state values from selectOptions
 * @return {array} state values
 */
function getSelectOptionsStates() {
    return selectOptions.map(value => value.name);
}

/**
 * Retrieve cities - values from selectOptions
 * @param {string} state - selected state
 * @return {array} - state cities
 */
function getSelectOptionsCities(selectstore) {
    return selectOptions
            .filter(value => value.name===selectstore)
            .map(val => val.cities)[0];
}

/**
 * Create select id=state with all the state options
 */
function createStateSelect() {
    const states = getSelectOptionsStates();
    const stateOptions = selectstore.map(selectstore => createOption(selectstore));
    createOptionsSelect('selectstore', stateOptions);
}

/**
 * Create select id=state with all the city options
 */
function createStateSelect() {
    const states = getSelectOptionsStates();
    const options = states.map(selectstore => createOption(selectstore));
    createOptionsSelect('selectstore', options);
}

/**
 * Create select id=city with all the city options
 * @param {string} stateId - selected state Id
 */
function createCitySelect(stateId) {
    const cities = getSelectOptionsCities(stateId);
    const options = cities.map(city => createOption(city));
    createOptionsSelect('contractor', options);
}

/**
 * onChange event trigger for state select 
 */
function onSelectState() {
    const selectedState = document.getElementById('selectstore').value;
    createCitySelect(selectedState);
}

/**
 * onload callback
 */
function init() {
    // Default state select
    const selectedStateDefault = 'selectstore';

    // console.log(getSelectOptionsStates());
    // console.log(getSelectOptionsCities('state3'));

    document.getElementById('selectstore').addEventListener('change', (e) => onSelectState(e), false);

    createStateSelect();
    createCitySelect(selectedStateDefault);
}

onload = init;

if ( window.history.replaceState ) {
  window.history.replaceState( null, null, window.location.href );
}


</Script>
    
</body>
</html>